{"version":3,"sources":["app/pages/meetingConfirmationPage/meetingConfirmationPage.controller.ts"],"names":[],"mappings":"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","file":"../../../../www/app/pages/meetingConfirmationPage/meetingConfirmationPage.controller.js","sourcesContent":["/**\n * MeetingConfirmationPageController\n * @description - Meeting Confirmation Page Controller\n */\n\nmodule app.pages.meetingConfirmationPage {\n\n    /**********************************/\n    /*           INTERFACES           */\n    /**********************************/\n    export interface IMeetingConfirmationPageController {\n        form: IMeetingConfirmationForm;\n        error: IMeetingConfirmationError;\n        activate: () => void;\n    }\n\n    interface IMeetingConfirmationScope extends angular.IScope {\n\n    }\n\n    interface IMeetingConfirmationForm {\n        helloText: string;\n        meetingPoint: IMeetingPoint;\n    }\n\n    interface IMeetingConfirmationError {\n        message: string;\n    }\n\n    export interface IMeetingPoint {\n        name: string;\n        category: string;\n        address: string;\n        prices: IPrice;\n        position: components.map.IPosition;\n    }\n\n    export interface IPrice {\n        min: number;\n        max: number;\n    }\n\n    /****************************************/\n    /*           CLASS DEFINITION           */\n    /****************************************/\n    export class MeetingConfirmationPageController implements IMeetingConfirmationPageController {\n\n        static controllerId = 'mainApp.pages.meetingConfirmationPage.MeetingConfirmationPageController';\n\n        /**********************************/\n        /*           PROPERTIES           */\n        /**********************************/\n        form: IMeetingConfirmationForm;\n        error: IMeetingConfirmationError;\n        mapConfig: components.map.IMapConfig;\n        processCompleted: boolean;\n        // --------------------------------\n\n\n        /*-- INJECT DEPENDENCIES --*/\n        public static $inject = [\n            'dataConfig',\n            '$state',\n            '$filter',\n            '$scope',\n            '$uibModal'];\n\n        /**********************************/\n        /*           CONSTRUCTOR          */\n        /**********************************/\n        constructor(\n            private dataConfig: IDataConfig,\n            private $state: ng.ui.IStateService,\n            private $filter: angular.IFilterService,\n            private $scope: IMeetingConfirmationScope,\n            private $uibModal: ng.ui.bootstrap.IModalService) {\n\n            this._init();\n\n        }\n\n        /*-- INITIALIZE METHOD --*/\n        private _init() {\n\n            //Init form\n            this.form = {\n                helloText: '',\n                meetingPoint: {\n                    name: 'Escoge un punto de encuentro',\n                    category: '',\n                    address: '',\n                    prices: {min:0, max:0},\n                    position: {lat: null, lng: null}\n                }\n            };\n\n            this.error = {\n                message: ''\n            };\n\n            // init map config\n            this.mapConfig = {\n                type: 'location-map',\n                data: null\n            };\n\n            this.activate();\n        }\n\n        /*-- ACTIVATE METHOD --*/\n        activate(): void {\n            //LOG\n            console.log('meetingConfirmationPage controller actived');\n        }\n\n        /**********************************/\n        /*            METHODS             */\n        /**********************************/\n\n        addNewMeetingPoint(): void {\n            let self = this;\n            // modal default options\n            let options: ng.ui.bootstrap.IModalSettings = {\n                animation: false,\n                backdrop: 'static',\n                keyboard: false,\n                templateUrl: this.dataConfig.modalMeetingPointTmpl,\n                controller: 'mainApp.components.modal.ModalMeetingPointController as vm',\n                resolve: {\n                    //one way to send data from this scope to modal\n                    dataSetModal: function () {\n                        return {\n                            model: {test: 'data'}\n                        }\n                    }\n                }\n            };\n\n            var modalInstance = this.$uibModal.open(options);\n\n            //When Modal closed, return the new meeting point\n            modalInstance.result.then(function (newMeetingPoint) {\n                /* TODO: Mostrar aqui el nuevo punto en el mapa, la info en el\n                        cuadro, habilitamos el boton: Send Request */\n            }, function () {\n                console.info('Modal dismissed at: ' + new Date());\n            });\n\n            event.preventDefault();\n        }\n\n\n        chooseMeetingPoint(): void {\n            /*TODO: Aqui deberiamos:\n                1. Tomar el punto escogido, y reemplazarlo con el\n                    texto que dice: Escoge punto de encuentro. */\n\n            //Build Meeting Point Model\n            // e.g. this.meetingPoint = new meetingPoint(this.form.meetingPoint);\n            var meetingPoint = {\n                name: 'Café Vervlet',\n                category: 'Café',\n                address: 'Trans 33 Sur',\n                prices: {min:23000, max:30000},\n                position: {lat: 6.1739743,lng: -75.5822414}\n            };\n\n            this.form.meetingPoint = meetingPoint;\n\n            /*\n                2. Validar si el usuario ya lleno el textarea de: Say Hello.\n                3. Deberia ocultar todo el bloque izquierdo, dandole\n                   protagonismo al bloque derecho, habilitando el\n                   botón: Send Request.\n                4. El texto del textarea: Decir hola!, deberia aparecer\n                   debajo del punto de encuentro, con la opción de poder\n                   editarlo, cuando presione de nuevo ahi, apareceria el\n                   bloque izquierdo (igualmente al dar clicn en el punto de\n                   encuentro).\n            */\n            if(this.form.helloText != '' &&\n               this.form.meetingPoint.position.lat != null &&\n               this.form.meetingPoint.position.lng != null) {\n\n                this.processCompleted = true;\n\n            }\n\n        }\n\n        saveMessage (): void {\n            if(this.form.helloText != '' &&\n               this.form.meetingPoint.position.lat != null &&\n               this.form.meetingPoint.position.lng != null) {\n\n                this.processCompleted = true;\n\n            }\n        }\n\n        edit(): void {\n            this.processCompleted = false;\n        }\n\n\n    }\n\n    /*-- MODULE DEFINITION --*/\n    angular\n        .module('mainApp.pages.meetingConfirmationPage')\n        .controller(MeetingConfirmationPageController.controllerId,\n                    MeetingConfirmationPageController);\n\n}\n"]}