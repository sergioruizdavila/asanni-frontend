{"version":3,"sources":["app/pages/searchPage/searchPage.controller.ts"],"names":[],"mappings":"AAKA,IAAO,GAAG,CA8eT;AA9eD,WAAO,GAAG;IAAC,IAAA,KAAK,CA8ef;IA9eU,WAAA,KAAK;QAAC,IAAA,UAAU,CA8e1B;QA9egB,WAAA,UAAU,EAAC,CAAC;YA0BzB;gBAqCI,8BACY,cAAkD,EAClD,cAAkD,EAClD,aAA+C,EAC/C,oBAAuE,EACvE,MAA2B,EAC3B,YAA+B,EAC/B,OAA+B,EAC/B,MAAsB,EACtB,UAAqC,EACrC,QAAiC;oBATjC,mBAAc,GAAd,cAAc,CAAoC;oBAClD,mBAAc,GAAd,cAAc,CAAoC;oBAClD,kBAAa,GAAb,aAAa,CAAkC;oBAC/C,yBAAoB,GAApB,oBAAoB,CAAmD;oBACvE,WAAM,GAAN,MAAM,CAAqB;oBAC3B,iBAAY,GAAZ,YAAY,CAAmB;oBAC/B,YAAO,GAAP,OAAO,CAAwB;oBAC/B,WAAM,GAAN,MAAM,CAAgB;oBACtB,eAAU,GAAV,UAAU,CAA2B;oBACrC,aAAQ,GAAR,QAAQ,CAAyB;oBAEzC,IAAI,CAAC,KAAK,EAAE,CAAC;gBAEjB,CAAC;gBAGO,oCAAK,GAAb;oBAII,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;oBAGtB,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC;oBAGf,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,IAAI,QAAQ,CAAC;oBACjD,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;oBAGnB,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;oBAGzB,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;oBAGzB,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;oBAG3B,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,KAAK,SAAS,CAAC;oBAC9D,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,KAAK,QAAQ,CAAC;oBAE5D,EAAE,CAAA,CAAC,CAAC,IAAI,CAAC,eAAe,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC;wBAC/C,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,IAAI,KAAK,SAAS,CAAC;wBAC/C,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,IAAI,KAAK,QAAQ,CAAC;oBACjD,CAAC;oBAED,IAAI,CAAC,KAAK,GAAG;wBACT,OAAO,EAAE,EAAE;qBACd,CAAC;oBAEF,IAAI,CAAC,QAAQ,EAAE,CAAC;gBACpB,CAAC;gBAGD,uCAAQ,GAAR;oBAEI,IAAM,cAAc,GAAG,oBAAoB,CAAC;oBAE5C,IAAI,IAAI,GAAG,IAAI,CAAC;oBAEhB,KAAK,IAAI,OAAO,CAAC,GAAG,CAAC,+BAA+B,CAAC,CAAC;oBAEtD,QAAQ,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC;oBAG/B,IAAI,CAAC,kBAAkB,EAAE,CAAC;oBAE1B,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;gBAEnD,CAAC;gBAiBO,gDAAiB,GAAzB,UAA0B,IAAY;oBAElC,IAAM,YAAY,GAAG,SAAS,CAAC;oBAC/B,IAAM,YAAY,GAAG,SAAS,CAAC;oBAC/B,IAAM,WAAW,GAAG,QAAQ,CAAC;oBAG7B,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;wBACX,KAAK,YAAY;4BACjB,MAAM,CAAC,uDAAuD,CAAC;wBAC/D,KAAK,YAAY;4BACjB,MAAM,CAAC,yDAAyD,CAAC;wBACjE,KAAK,WAAW;4BAChB,MAAM,CAAC,uDAAuD,CAAC;oBACnE,CAAC;gBACL,CAAC;gBAcO,8CAAe,GAAvB,UAAwB,MAAM;oBAE1B,IAAM,cAAc,GAAG,SAAS,CAAC;oBACjC,IAAM,aAAa,GAAG,QAAQ,CAAC;oBAE/B,IAAI,IAAI,GAAG,IAAI,CAAC;oBAEhB,MAAM,GAAG,MAAM,IAAI,aAAa,CAAC;oBAEjC,EAAE,CAAA,CAAC,MAAM,KAAK,cAAc,CAAC,CAAC,CAAC;wBAE3B,IAAI,CAAC,cAAc,CAAC,sBAAsB,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,IAAI,CAC3D,UAAS,QAAgD;4BAErD,IAAI,CAAC,IAAI,GAAG,SAAS,CAAC;4BACtB,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC;4BACtB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,oBAAoB,CAAC,cAAc,CACrD,QAAQ,CAAC,OAAO,EAChB,YAAY,EACZ,IAAI,EACJ,CAAC,CACJ,CAAC;4BAMF,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,cAAc,EAAE,EAAC,SAAS,EAAE,IAAI,CAAC,SAAS,EAAE,YAAY,EAAE,IAAI,CAAC,MAAM,EAAC,CAAC,CAAC;4BAE/F,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,oBAAoB,CAAC,cAAc,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;4BAG1E,EAAE,CAAA,CAAC,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC,CAAC;gCAC3B,IAAI,CAAC,QAAQ,CAAC;oCACV,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;gCACrD,CAAC,CAAC,CAAC;4BACP,CAAC;4BAED,IAAI,CAAC,QAAQ,CAAC;gCACV,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;gCAC1B,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;4BAChC,CAAC,CAAC,CAAC;wBACP,CAAC,CACJ,CAAC;oBACN,CAAC;oBAAC,IAAI,CAAC,EAAE,CAAA,CAAC,MAAM,KAAK,aAAa,CAAC,CAAC,CAAC;wBAGjC,IAAI,CAAC,aAAa,CAAC,qBAAqB,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,IAAI,CACzD,UAAS,QAA8C;4BAEnD,IAAI,CAAC,IAAI,GAAG,QAAQ,CAAC;4BACrB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;4BACrB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,oBAAoB,CAAC,cAAc,CACrD,QAAQ,CAAC,OAAO,EAChB,YAAY,EACZ,IAAI,EACJ,CAAC,CACJ,CAAC;4BAMF,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,cAAc,EAAE,EAAC,SAAS,EAAE,IAAI,CAAC,SAAS,EAAE,YAAY,EAAE,IAAI,CAAC,MAAM,EAAC,CAAC,CAAC;4BAE/F,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,oBAAoB,CAAC,cAAc,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;4BAG1E,EAAE,CAAA,CAAC,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC,CAAC;gCAC3B,IAAI,CAAC,QAAQ,CAAC;oCACV,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;gCACrD,CAAC,CAAC,CAAC;4BACP,CAAC;4BAED,IAAI,CAAC,QAAQ,CAAC;gCACV,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;gCAC1B,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;4BAChC,CAAC,CAAC,CAAC;wBACP,CAAC,CACJ,CAAC;oBACN,CAAC;gBACL,CAAC;gBAWD,yCAAU,GAAV,UAAW,MAAc;oBAErB,IAAM,iBAAiB,GAAG,iBAAiB,CAAC;oBAC5C,IAAM,cAAc,GAAG,uBAAuB,GAAG,MAAM,GAAG,KAAK,CAAC;oBAIhE,QAAQ,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC;oBAE/B,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,iBAAiB,EAAE,EAAC,MAAM,EAAE,MAAM,EAAC,EAAE,EAAC,MAAM,EAAE,IAAI,EAAC,CAAC,CAAC;gBACxE,CAAC;gBAeO,+CAAgB,GAAxB,UAAyB,OAAO;oBAE5B,IAAI,IAAI,GAAG,IAAI,CAAC;oBAEhB,EAAE,CAAA,CAAC,OAAO,IAAI,UAAU,CAAC,CAAC,CAAC;wBACvB,IAAI,UAAQ,GAAG;4BACX,OAAO,EAAE,OAAO;4BAChB,IAAI,EAAE,UAAU;4BAChB,OAAO,EAAE,2BAA2B;yBACvC,CAAC;wBAGF,IAAI,CAAC,QAAQ,CAAC;4BACV,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,iBAAiB,EAAE,UAAQ,CAAC,CAAC;wBAC5D,CAAC,CAAC,CAAC;oBACP,CAAC;gBACL,CAAC;gBAYO,iDAAkB,GAA1B;oBAEI,IAAI,IAAI,GAAG,IAAI,CAAC;oBAWhB,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,UAAU,EAAE,UAAS,KAAK,EAAE,IAAI;wBAE5C,IAAI,CAAC,cAAc,CAAC,cAAc,EAAE,CAAC,IAAI,CACrC,UAAS,QAA2C;4BAEhD,IAAI,CAAC,IAAI,GAAG,SAAS,CAAC;4BACtB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,oBAAoB,CAAC,cAAc,CACrD,QAAQ,EACR,YAAY,EACZ,EAAC,GAAG,EAAE,QAAQ,EAAC,GAAG,EAAE,CAAC,SAAS,EAAC,EAC/B,CAAC,CACJ,CAAC;4BAMF,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,cAAc,EAAE,EAAC,SAAS,EAAE,IAAI,CAAC,SAAS,EAAE,YAAY,EAAE,OAAO,EAAC,CAAC,CAAC;4BAE3F,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,oBAAoB,CAAC,cAAc,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;wBACtE,CAAC,CACJ,CAAC;oBACN,CAAC,CAAC,CAAC;oBAYH,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,UAAU,EAAE,UAAS,KAAK,EAAE,IAAI;wBAG5C,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;wBAE3B,IAAI,CAAC,IAAI,GAAG,SAAS,CAAC;wBAGtB,IAAI,CAAC,cAAc,CAAC,sBAAsB,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,IAAI,CAC3D,UAAS,QAAgD;4BAErD,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,oBAAoB,CAAC,cAAc,CACrD,QAAQ,CAAC,OAAO,EAChB,YAAY,EACZ,IAAI,EACJ,CAAC,CACJ,CAAC;4BAEF,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;4BAM5B,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,cAAc,EAAE,EAAC,SAAS,EAAE,IAAI,CAAC,SAAS,EAAE,YAAY,EAAE,OAAO,EAAC,CAAC,CAAC;4BAE3F,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,oBAAoB,CAAC,cAAc,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;wBAC9E,CAAC,CACJ,CAAC;oBACN,CAAC,CAAC,CAAC;oBAYH,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,SAAS,EAAE,UAAS,KAAK,EAAE,IAAI;wBAG3C,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;wBAE3B,IAAI,CAAC,IAAI,GAAG,QAAQ,CAAC;wBAGrB,IAAI,CAAC,aAAa,CAAC,qBAAqB,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,IAAI,CACzD,UAAS,QAA8C;4BAEnD,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,oBAAoB,CAAC,cAAc,CACrD,QAAQ,CAAC,OAAO,EAChB,YAAY,EACZ,EAAC,GAAG,EAAE,QAAQ,EAAC,GAAG,EAAE,CAAC,SAAS,EAAC,EAC/B,CAAC,CACJ,CAAC;4BAEF,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;4BAM5B,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,cAAc,EAAE,EAAC,SAAS,EAAE,IAAI,CAAC,SAAS,EAAE,YAAY,EAAE,MAAM,EAAC,CAAC,CAAC;4BAE1F,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,oBAAoB,CAAC,cAAc,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;wBAC9E,CAAC,CACJ,CAAC;oBACN,CAAC,CAAC,CAAC;oBAYH,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,iBAAiB,EAAE,UAAS,KAAK,EAAE,IAAI;wBAEnD,IAAM,UAAU,GAAG,sBAAsB,CAAC;wBAE1C,IAAI,WAAW,GAAG,aAAa,GAAG,IAAI,CAAC;wBAEvC,IAAI,UAAU,GAAG,QAAQ,CAAC,sBAAsB,CAAC,UAAU,CAAC,CAAC;wBAE7D,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;4BACzC,UAAU,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;wBAC/C,CAAC;wBAED,IAAI,gBAAgB,GAAG,QAAQ,CAAC,aAAa,CAAC,WAAW,CAAC,CAAC,SAAS,CAAC;wBACrE,gBAAgB,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;wBACjC,QAAQ,CAAC,aAAa,CAAC,WAAW,CAAC,CAAC,cAAc,CAAC,EAAE,QAAQ,EAAE,QAAQ,EAAE,CAAC,CAAC;oBAC/E,CAAC,CAAC,CAAC;oBAYH,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,eAAe,EAAE,UAAS,KAAK,EAAE,IAAI;wBACjD,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC;oBAChC,CAAC,CAAC,CAAC;gBACP,CAAC;gBAxcM,iCAAY,GAAG,+CAA+C,CAAC;gBAoBxD,4BAAO,GAAG;oBACpB,uCAAuC;oBACvC,uCAAuC;oBACvC,qCAAqC;oBACrC,wCAAwC;oBACxC,QAAQ;oBACR,cAAc;oBACd,SAAS;oBACT,QAAQ;oBACR,YAAY;oBACZ,UAAU,CAAC,CAAC;gBA6apB,2BAAC;YAAD,CA7cA,AA6cC,IAAA;YA7cY,+BAAoB,uBA6chC,CAAA;YAGD,OAAO;iBACF,MAAM,CAAC,0BAA0B,CAAC;iBAClC,UAAU,CAAC,oBAAoB,CAAC,YAAY,EAAE,oBAAoB,CAAC,CAAC;QAE7E,CAAC,EA9egB,UAAU,GAAV,gBAAU,KAAV,gBAAU,QA8e1B;IAAD,CAAC,EA9eU,KAAK,GAAL,SAAK,KAAL,SAAK,QA8ef;AAAD,CAAC,EA9eM,GAAG,KAAH,GAAG,QA8eT","file":"../../../../www/app/pages/searchPage/searchPage.controller.js","sourcesContent":["/**\n * SearchPageController\n * @description - Search Page Controller\n */\n\nmodule app.pages.searchPage {\n\n    /**********************************/\n    /*           INTERFACES           */\n    /**********************************/\n    interface ISearchPageController {\n        error: ISearchPageError;\n        activate: () => void;\n    }\n\n    interface ISearchPageError {\n        message: string;\n    }\n\n    /********************************/\n    /*    STATEPARAMS INTERFACES    */\n    /********************************/\n    export interface ISearchPageParams extends ng.ui.IStateParamsService {\n        country: string;\n        target: string;\n    }\n\n\n    /****************************************/\n    /*           CLASS DEFINITION           */\n    /****************************************/\n    export class SearchPageController implements ISearchPageController {\n\n        static controllerId = 'mainApp.pages.searchPage.SearchPageController';\n\n        /**********************************/\n        /*           PROPERTIES           */\n        /**********************************/\n        error: ISearchPageError;\n        mapConfig: components.map.IMapConfig;\n        data: Array<app.models.student.Student>;\n        type: string;\n        marker: string;\n        VALIDATED: string;\n        rightLoading: boolean;\n        leftLoading: boolean;\n        shadowsLoading: boolean;\n        private _teacherChecked: boolean;\n        private _schoolChecked: boolean;\n        // --------------------------------\n\n\n        /*-- INJECT DEPENDENCIES --*/\n        public static $inject = [\n            'mainApp.models.student.StudentService',\n            'mainApp.models.teacher.TeacherService',\n            'mainApp.models.school.SchoolService',\n            'mainApp.core.util.FunctionsUtilService',\n            '$state',\n            '$stateParams',\n            '$filter',\n            '$scope',\n            '$rootScope',\n            '$timeout'];\n\n        /**********************************/\n        /*           CONSTRUCTOR          */\n        /**********************************/\n        constructor(\n            private StudentService: app.models.student.IStudentService,\n            private TeacherService: app.models.teacher.ITeacherService,\n            private SchoolService: app.models.school.ISchoolService,\n            private FunctionsUtilService: app.core.util.functionsUtil.IFunctionsUtilService,\n            private $state: ng.ui.IStateService,\n            private $stateParams: ISearchPageParams,\n            private $filter: angular.IFilterService,\n            private $scope: angular.IScope,\n            private $rootScope: angular.IRootScopeService,\n            private $timeout: angular.ITimeoutService) {\n\n            this._init();\n\n        }\n\n        /*-- INITIALIZE METHOD --*/\n        private _init() {\n            //TODO: Buscar una forma de crear un Enum global, donde no tenga que\n            // hacer esto cada vez que quiera usar un filtro\n            //GLOBAL CONSTANTS\n            this.VALIDATED = 'VA';\n\n            //Init users list\n            this.data = [];\n\n            //Type of results (student, teacher, school)\n            this.type = this.$stateParams.target || 'school';\n            this.marker = null;\n\n            //Init left loading\n            this.leftLoading = false;\n\n            //Init right loading\n            this.rightLoading = true;\n\n            //Init shadows loading\n            this.shadowsLoading = true;\n\n            //Init small device filter button\n            this._teacherChecked = this.$stateParams.target === 'teacher';\n            this._schoolChecked = this.$stateParams.target === 'school';\n\n            if(!this._teacherChecked && !this._schoolChecked) {\n                this._teacherChecked = this.type === 'teacher';\n                this._schoolChecked = this.type === 'school';\n            }\n\n            this.error = {\n                message: ''\n            };\n\n            this.activate();\n        }\n\n        /*-- ACTIVATE METHOD --*/\n        activate(): void {\n            //CONSTANTS\n            const ENTER_MIXPANEL = 'Enter: Search Page';\n            //VARIABLES\n            let self = this;\n            //LOG\n            DEBUG && console.log('searchPage controller actived');\n            //MIXPANEL\n            mixpanel.track(ENTER_MIXPANEL);\n\n            //SUBSCRIBE TO EVENTS\n            this._subscribeToEvents();\n\n            this._firstFetchData(this.$stateParams.target);\n\n        }\n\n        /**********************************/\n        /*            METHODS             */\n        /**********************************/\n\n\n        /**\n        * _getResultLoading\n        * @description - this method return specific loading template\n        * based on type result (students, teachers, schools, etc)\n        * @use - this._getResultTemplate('student');\n        * @function\n        * @params {string} type - type of results list (students, teachers, schools, etc)\n        * @return {string} result template path\n        */\n\n        private _getResultLoading(type: string): string {\n            //CONSTANTS\n            const STUDENT_TYPE = 'student';\n            const TEACHER_TYPE = 'teacher';\n            const SCHOOL_TYPE = 'school';\n            /*********************************/\n\n            switch (type) {\n                case STUDENT_TYPE:\n                return 'app/pages/searchPage/studentResult/studentResult.html';\n                case TEACHER_TYPE:\n                return 'app/pages/searchPage/teacherLoading/teacherLoading.html';\n                case SCHOOL_TYPE:\n                return 'app/pages/searchPage/schoolLoading/schoolLoading.html';\n            }\n        }\n\n\n        /**\n        * _firstFetchData\n        * @description - TODO: Este metodo es temporal, en realidad no deberia\n        * buscar por un pais en particular, sino con la direccion que el user\n        * especifique en el buscador. Dejar este metodo hasta cuando sea necesarios\n        * implementar el buscador completo\n        * @use - this._subscribeToEvents();\n        * @function\n        * @return {void}\n        */\n\n        private _firstFetchData(target): void {\n            //CONSTANTS\n            const TARGET_TEACHER = 'teacher';\n            const TARGET_SCHOOL = 'school';\n            //VARIABLES\n            let self = this;\n            //If target is null, assign school as a default\n            target = target || TARGET_SCHOOL;\n\n            if(target === TARGET_TEACHER) {\n                //Get All Teacher of this zone\n                this.TeacherService.getAllTeachersByStatus(this.VALIDATED).then(\n                    function(response: app.models.teacher.ITeacherQueryObject) {\n\n                        self.type = 'teacher';\n                        self.marker = 'round';\n                        self.mapConfig = self.FunctionsUtilService.buildMapConfig(\n                            response.results,\n                            'search-map',\n                            null,\n                            6\n                        );\n\n                        /*\n                        * Send event to child (MapController) in order to It draws\n                        * each Marker on the Map\n                        */\n                        self.$scope.$broadcast('BuildMarkers', {mapConfig: self.mapConfig, typeOfMarker: self.marker});\n\n                        self.data = self.FunctionsUtilService.splitToColumns(response.results, 2);\n\n                        //Center Map on Country selected\n                        if(self.$stateParams.country) {\n                            self.$timeout(function(){\n                                self._searchByCountry(self.$stateParams.country);\n                            });\n                        }\n\n                        self.$timeout(function(){\n                            self.rightLoading = false;\n                            self.shadowsLoading = false;\n                        });\n                    }\n                );\n            } else if(target === TARGET_SCHOOL) {\n\n                //Get All Schools of this zone\n                this.SchoolService.getAllSchoolsByStatus(this.VALIDATED).then(\n                    function(response: app.models.school.ISchoolQueryObject) {\n\n                        self.type = 'school';\n                        self.marker = 'long';\n                        self.mapConfig = self.FunctionsUtilService.buildMapConfig(\n                            response.results,\n                            'search-map',\n                            null,\n                            6\n                        );\n\n                        /*\n                        * Send event to child (MapController) in order to It draws\n                        * each Marker on the Map\n                        */\n                        self.$scope.$broadcast('BuildMarkers', {mapConfig: self.mapConfig, typeOfMarker: self.marker});\n\n                        self.data = self.FunctionsUtilService.splitToColumns(response.results, 2);\n\n                        //Center Map on Country selected\n                        if(self.$stateParams.country) {\n                            self.$timeout(function(){\n                                self._searchByCountry(self.$stateParams.country);\n                            });\n                        }\n\n                        self.$timeout(function(){\n                            self.rightLoading = false;\n                            self.shadowsLoading = false;\n                        });\n                    }\n                );\n            }\n        }\n\n\n\n        /**\n        * goToSearch\n        * @description - go to search page\n        * @function\n        * @param {string} target - Section user clicked\n        * @return {void}\n        */\n        goToSearch(target: string): void {\n            //CONSTANTS\n            const SEARCH_PAGE_STATE = 'page.searchPage';\n            const CLICK_MIXPANEL = 'SearchPage: Click on ' + target + 'btn';\n            /************************/\n\n            //MIXPANEL\n            mixpanel.track(CLICK_MIXPANEL);\n\n            this.$state.go(SEARCH_PAGE_STATE, {target: target}, {reload: true});\n        }\n\n\n\n        /**\n        * _searchByCountry\n        * @description - TODO: Este metodo es temporal, en realidad no deberia\n        * buscar por un pais en particular, sino con la direccion que el user\n        * especifique en el buscador. Dejar este metodo hasta cuando sea necesarios\n        * implementar el buscador completo\n        * @use - this._subscribeToEvents();\n        * @function\n        * @return {void}\n        */\n\n        private _searchByCountry(country): void {\n            //VARIABLES\n            let self = this;\n\n            if(country == 'Colombia') {\n                let location = {\n                    country: country,\n                    city: 'Medellin',\n                    address: 'Transversal 31Sur #32B-64'\n                };\n                /************************************/\n\n                this.$timeout(function(){\n                    self.$rootScope.$broadcast('PositionCountry', location);\n                });\n            }\n        }\n\n\n\n        /**\n        * _subscribeToEvents\n        * @description - this method subscribes Search Page to Child's Events\n        * @use - this._subscribeToEvents();\n        * @function\n        * @return {void}\n        */\n\n        private _subscribeToEvents(): void {\n            // VARIABLES\n            let self = this;\n\n            /**\n            * Students event\n            * @child - MapController\n            * @description - Parent (SearchPageController) receive Child's\n                             event (MapController) in order to get\n                             students list from server\n            * @event\n            */\n\n            this.$scope.$on('Students', function(event, args) {\n                //Get All Users of this zone\n                self.StudentService.getAllStudents().then(\n                    function(response: Array<app.models.student.Student>) {\n\n                        self.type = 'student';\n                        self.mapConfig = self.FunctionsUtilService.buildMapConfig(\n                            response,\n                            'search-map',\n                            {lat: 6.175434,lng: -75.583329},\n                            6\n                        );\n\n                        /*\n                        * Send event to child (MapController) in order to It draws\n                        * each Marker on the Map\n                        */\n                        self.$scope.$broadcast('BuildMarkers', {mapConfig: self.mapConfig, typeOfMarker: 'round'});\n\n                        self.data = self.FunctionsUtilService.splitToColumns(response, 2);\n                    }\n                );\n            });\n\n\n            /**\n            * Teachers event\n            * @child - MapController\n            * @description - Parent (SearchPageController) receive Child's\n                             event (MapController) in order to get\n                             teachers list from server\n            * @event\n            */\n\n            this.$scope.$on('Teachers', function(event, args) {\n\n                //Init left loading\n                self.shadowsLoading = true;\n\n                self.type = 'teacher';\n\n                //Get All Teachers of this zone\n                self.TeacherService.getAllTeachersByStatus(self.VALIDATED).then(\n                    function(response: app.models.teacher.ITeacherQueryObject) {\n\n                        self.mapConfig = self.FunctionsUtilService.buildMapConfig(\n                            response.results,\n                            'search-map',\n                            null,\n                            6\n                        );\n\n                        self.shadowsLoading = false;\n\n                        /*\n                        * Send event to child (MapController) in order to It draws\n                        * each Marker on the Map\n                        */\n                        self.$scope.$broadcast('BuildMarkers', {mapConfig: self.mapConfig, typeOfMarker: 'round'});\n\n                        self.data = self.FunctionsUtilService.splitToColumns(response.results, 2);\n                    }\n                );\n            });\n\n\n            /**\n            * Schools event\n            * @child - MapController\n            * @description - Parent (SearchPageController) receive Child's\n                             event (MapController) in order to get\n                             schools list from server\n            * @event\n            */\n\n            this.$scope.$on('Schools', function(event, args) {\n\n                //Init left loading\n                self.shadowsLoading = true;\n\n                self.type = 'school';\n\n                //Get All Schools of this zone\n                self.SchoolService.getAllSchoolsByStatus(self.VALIDATED).then(\n                    function(response: app.models.school.ISchoolQueryObject) {\n\n                        self.mapConfig = self.FunctionsUtilService.buildMapConfig(\n                            response.results,\n                            'search-map',\n                            {lat: 6.175434,lng: -75.583329},\n                            6\n                        );\n\n                        self.shadowsLoading = false;\n\n                        /*\n                        * Send event to child (MapController) in order to It draws\n                        * each Marker on the Map\n                        */\n                        self.$scope.$broadcast('BuildMarkers', {mapConfig: self.mapConfig, typeOfMarker: 'long'});\n\n                        self.data = self.FunctionsUtilService.splitToColumns(response.results, 2);\n                    }\n                );\n            });\n\n\n            /**\n            * SelectContainer event\n            * @child - MapController\n            * @description - Parent (SearchPageController) receive Child's\n                             event (MapController) in order to selected\n                             specific result container\n            * @event\n            */\n\n            this.$scope.$on('SelectContainer', function(event, args) {\n                //CONSTANTS\n                const hoverClass = 'ma-box--border-hover';\n                //VARIABLES\n                let containerId = '#container-' + args;\n\n                let containers = document.getElementsByClassName(hoverClass);\n\n                for (let i = 0; i < containers.length; i++) {\n                    containers[i].classList.remove(hoverClass);\n                }\n\n                let containerClasses = document.querySelector(containerId).classList;\n                containerClasses.add(hoverClass);\n                document.querySelector(containerId).scrollIntoView({ behavior: 'smooth' });\n            });\n\n\n            /**\n            * SearchCountry event\n            * @parent - HeaderController\n            * @description - Parent (HeaderController) send event\n                             (SearchPageController) in order to change map\n                             center position\n            * @event\n            */\n\n            this.$scope.$on('SearchCountry', function(event, args) {\n                self._searchByCountry(args);\n            });\n        }\n\n\n    }\n\n    /*-- MODULE DEFINITION --*/\n    angular\n        .module('mainApp.pages.searchPage')\n        .controller(SearchPageController.controllerId, SearchPageController);\n\n}\n"]}