{"version":3,"sources":["app/pages/searchPage/schoolResult/schoolResult.directive.ts"],"names":[],"mappings":"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","file":"../../../../../www/app/pages/searchPage/schoolResult/schoolResult.directive.js","sourcesContent":["/**\n* MaSchoolResult\n* @description - MainApp School Result on SearchPage Directive\n* @example - <ma-school-result></ma-school-result>\n*/\n\nmodule app.pages.searchPage {\n    'use strict';\n\n    /**********************************/\n    /*           INTERFACES           */\n    /**********************************/\n    export interface ISchoolResult extends angular.IDirective {\n\n    }\n\n    /****************************************/\n    /*           CLASS DEFINITION           */\n    /****************************************/\n    class MaSchoolResult implements ISchoolResult {\n\n        static directiveId = 'maSchoolResult';\n\n        /**********************************/\n        /*           PROPERTIES           */\n        /**********************************/\n        bindToController: Boolean = true;\n        controller = SchoolResultController.controllerId;\n        controllerAs: string = 'vm';\n        restrict: string = 'E';\n        templateUrl: string = 'app/pages/searchPage/schoolResult/schoolResult.html';\n        // --------------------------------\n\n        /*-- INJECT DEPENDENCIES --*/\n        //static $inject = ['dataConfig'];\n\n        /**********************************/\n        /*           CONSTRUCTOR          */\n        /**********************************/\n        constructor() {\n            DEBUG && console.log('maSchoolResult directive constructor');\n        }\n\n        link($scope: angular.IScope, elm: Element, attr: angular.IAttributes): void {\n            DEBUG && console.log('maSchoolResult link function');\n        }\n\n        /*-- INSTANCE FUNCTION --*/\n        static instance(): ISchoolResult {\n            return new MaSchoolResult();\n        }\n    }\n\n    /*-- MODULE DEFINITION --*/\n    angular\n        .module('mainApp.pages.searchPage')\n        .directive(MaSchoolResult.directiveId, MaSchoolResult.instance);\n\n\n        /*********************************************************/\n        /*                     CONTROLLER                        */\n        /*********************************************************/\n        /**\n        * SchoolResultController\n        * @description - School Result Controller\n        */\n\n        /**********************************/\n        /*           INTERFACES           */\n        /**********************************/\n        interface ISchoolResultController {\n            activate: () => void;\n        }\n\n        interface ISchoolResultForm {\n        }\n\n        /****************************************/\n        /*           CLASS DEFINITION           */\n        /****************************************/\n        export class SchoolResultController implements ISchoolResultController {\n\n            static controllerId = 'mainApp.pages.searchPage.SchoolResultController';\n\n            /**********************************/\n            /*           PROPERTIES           */\n            /**********************************/\n            form: ISchoolResultForm;\n            private _hoverDetail: Array<boolean>;\n            // --------------------------------\n\n\n            /*-- INJECT DEPENDENCIES --*/\n            static $inject = [\n                'mainApp.core.util.FunctionsUtilService',\n                'mainApp.models.school.SchoolService',\n                '$uibModal',\n                'dataConfig',\n                '$filter',\n                '$state',\n                '$rootScope'\n            ];\n\n\n            /**********************************/\n            /*           CONSTRUCTOR          */\n            /**********************************/\n            constructor(private functionsUtil: app.core.util.functionsUtil.IFunctionsUtilService,\n                        private SchoolService: app.models.school.ISchoolService,\n                        private $uibModal: ng.ui.bootstrap.IModalService,\n                        private dataConfig: IDataConfig,\n                        private $filter: angular.IFilterService,\n                        private $state: ng.ui.IStateService,\n                        private $rootScope: angular.IRootScopeService) {\n                this.init();\n            }\n\n\n            /*-- INITIALIZE METHOD --*/\n            private init() {\n\n                //Init form\n                this.form = {\n\n                };\n\n                //Init hoverDetail array\n                this._hoverDetail = [];\n\n                this.activate();\n            }\n\n            /*-- ACTIVATE METHOD --*/\n            activate(): void {\n                //LOG\n                DEBUG && console.log('schoolResult controller actived');\n            }\n\n\n            /**********************************/\n            /*            METHODS             */\n            /**********************************/\n\n            /**\n            * _chooseMinorPrice\n            * @description - take school ranking and calculate the rating average\n            * @use - this._chooseMinorPrice(priceSchoolObj);\n            * @function\n            * @param {any} prices - school's prices\n            * @return {number} minor price\n            */\n            /*NOTE: It's 'any' because the data that I receive is item.price not\n            vm.data.Price (A price instance)*/\n            private _chooseMinorPrice(prices: any): number {\n                let priceInstance = new app.models.school.Price(prices);\n                return this.SchoolService.getMinorSchoolPrice(priceInstance);\n            }\n\n\n\n            /**\n            * _ratingFeatureAverage\n            * @description - Calculate school rating feature average\n            * @use - this._ratingFeatureAverage();\n            * @function\n            * @return {number} average - average value\n            */\n\n            private _ratingFeatureAverage(school): number {\n                let schoolInstance = new app.models.school.School(school);\n                return this.SchoolService.schoolFeatureRatingAverage(schoolInstance);\n            }\n\n\n\n            /**\n            * goToDetails\n            * @description - when user clicked a specific result, go to details\n            * @use - this.goToDetails('2');\n            * @function\n            * @param {string} containerId - entity id (school)\n            * @return {void}\n            */\n\n            goToDetails(containerId: string): void {\n                var url = this.$state.href('page.schoolProfilePage', {id: containerId});\n                window.open(url,'_blank');\n            }\n\n\n\n            /**\n            * _ratingAverage\n            * @description - take school ranking and calculate the rating average\n            * @use - this._ratingAverage(ratingsArray);\n            * @function\n            * @param {Array<Object>} ratingsArr - list of rating objects\n            * @return {number} rating average value\n            */\n            //TODO: Analizar por que puse Array<Object> en vez de Array<Rating>\n            // y solucionar\n            /*private _ratingAverage(ratingsArr: Array<Object>): number {\n                return this.functionsUtil.schoolRatingAverage(ratingsArr);\n            }*/\n\n\n\n            /**\n            * _hoverEvent\n            * @description - this method is launched  when user launchs\n            * mouseover/mouseleave event on result container\n            * @use - this._hoverEvent('10', true);\n            * @function\n            * @param {string} id - container result id\n            * @param {boolean} status - mouseover = true / mouseleave = false\n            */\n\n            private _hoverEvent(id: string, status: boolean): void {\n                //VARIABLES\n                let args = {id: id, status: status, typeOfMarker: 'long'};\n                this._hoverDetail[id] = status;\n                /*\n                * Send event to child (MapController) in order to It changes icon in\n                * specific Marker on the Map\n                */\n                this.$rootScope.$broadcast('ChangeMarker', args);\n            }\n\n\n        }\n\n        /*-- MODULE DEFINITION --*/\n        angular.module('mainApp.pages.searchPage')\n            .controller(SchoolResultController.controllerId, SchoolResultController);\n\n}\n"]}